<!DOCTYPE html>
<html ng-app="dietitian">

<head>
<title>私の栄養士</title>
<meta name="viewport" content="width=device-width, initial-scale=1"></meta>
<meta charset="UTF-8">
<link rel='stylesheet' href='/bower_components/bootstrap/dist/css/bootstrap.min.css' />
<script type="text/javascript" src="bower_components/jquery/dist/jquery.min.js"></script>
<script type="text/javascript" src="bower_components/angular/angular.min.js"></script>
<script type="text/javascript" src="bower_components/chart.js/dist/Chart.min.js"></script>
<script type="text/javascript" src="bower_components/angular-bootstrap/ui-bootstrap-tpls.min.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script type="text/javascript" src="javascripts/dietitian/module.js"></script>
<script type="text/javascript" src="javascripts/dietitian/rootCtl.js"></script>
<script type="text/javascript" src="javascripts/dietitian/personCtl.js"></script>
<script type="text/javascript" src="javascripts/dietitian/todayCtl.js"></script>
<script type="text/javascript" src="javascripts/dietitian/thisWeekCtl.js"></script>
<script>
angular.module("dietitian")
.constant("person", <%- JSON.stringify(person) %>);
</script>
</head>

<style>
@media (max-width: 767px) {
    .root-container {
         width: 95%;
    }
    .person-icon-container {
        text-align: center;
    }
    .person-icon {
        height: 90px;
    }
    .person-name-container {
        text-align: center;
        margin: 20px 0 20px 0;
    }
    .person-name {
        font-size:24pt;
    }
    .profile-attr-label {
        font-weight:bold;
        border-bottom: solid 1px #ddd;
        padding:10px 0;
        font-size: 0.9em;
    }
    .profile-attr-value {
        padding: 10px 0;
        font-size: 1.0em;
    }
    .calorie-container {
        margin: 0 auto 60px auto;
        width: 100%;
    }
    .today-calorie-info-container {
        display: none;
    }
    .today-calorie-chart-container {
        text-align: center;
    }
    .today-calorie-chart {
        height: 180px;
    }
}
@media (min-width: 768px) and (max-width: 991px) {
    .root-container {
         width: 80%;
    }
    .person-icon {
        height: 150px;
    }
    .person-name {
        font-size:30pt;
    }
    .profile-attr-label {
        font-weight:bold;
        border-bottom: solid 1px #ddd;
        padding:10px 0;
    }
    .profile-attr-value {
        padding: 10px 0;
        font-size: 1.5em;
    }
    .calorie-container {
        margin: 0 auto 60px auto;
        width: 80%;
    }
}
@media (min-width: 992px) {
    .root-container {
         width: 80%;
    }
    .person-icon {
        height: 180px;
    }
    .person-name {
        font-size:30pt;
    }
    .profile-attr-label {
        font-weight:bold;
        border-bottom: solid 1px #ddd;
        padding:10px 0;
    }
    .profile-attr-value {
        padding: 10px 0;
        font-size: 1.5em;
    }
    .calorie-container {
        margin: 0 auto 60px auto;
        width: 80%;
    }
}
body {
    font-size: 12pt;
    color: #666;
}
.calorie-percentage-label {
    font-size: 1.3em;
}
.calorie-percentage-value {
    font-size: 5.0em;
}
</style>

<body>
    <div class="container root-container" ng-controller="rootCtl" style="margin-top: 20px; margin-bottom: 40px;" ng-cloak="true">
        <!-- Person Profile -->
        <div ng-controller="personCtl" id="person_profile" style="margin-bottom: 40px;">
            <div class="person-edit-button-container" style="text-align:right;">
                <button class="btn btn-default" type="button" ng-click="openPersonForm(ui.person)" ng-disabled="ui.remoting.isRemoting"><span class="glyphicon glyphicon-pencil"></span>&nbsp;編集</button>
            </div>

            <div class="row">
                <div class="col-sm-3 person-icon-container">
                    <img ng-src="{{ui.person.icon_url}}" class="img-circle person-icon"></img>
                </div>

                <div class="col-sm-9">

                    <div style="margin-bottom:10px;" class="person-name-container">
                        <span class="person-name">{{ui.person.display_name}}</span>
                    </div>

                    <div class="row" style="text-align:center;">
                        <div class="col-xs-3">
                            <div class="profile-attr-label">年齢</div>
                            <div class="profile-attr-value">{{ui.person.age}} 歳</div>
                        </div>
                        <div class="col-xs-3">
                            <div class="profile-attr-label">性別</div>
                            <div class="profile-attr-value">{{getSexLabel(ui.person.sex)}}</div>
                        </div>
                        <div class="col-xs-3">
                            <div class="profile-attr-label">身長</div>
                            <div class="profile-attr-value">{{ui.person.height}} cm</div>
                        </div>
                        <div class="col-xs-3">
                            <div class="profile-attr-label">活動量</div>
                            <div class="profile-attr-value">{{ui.person.activity}}</div>
                        </div>
                    </div>

                </div>

            </div>

            <div ng-show="ui.remoting.isRemoting" style="margin-top: 20px;">
                <div style="text-align:center;color: #999;">
                    {{ui.remoting.status}}
                </div>
                <div class="progress">
                    <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="100" aria-valuemax="100" style="width: 100%">
                        <span class="sr-only">{{ui.remoting.status}}</span>
                    </div>
                </div>
            </div>

        </div>

        <!-- Tab Bar -->
        <ul class="nav nav-tabs" ng-init="ui.currentTab = 'today'" style="margin-bottom: 10px;">
            <li ng-class="(ui.currentTab == 'today') ? 'active' : ''"><a href="#" class="tab_label" ng-click="setCurrentTab($event, 'today')">今日</a></li>
            <li ng-class="(ui.currentTab == 'this_week') ? 'active' : ''"><a href="#" class="tab_label" ng-click="setCurrentTab($event, 'this_week')">今週</a></li>
        </ul>

        <!-- Tab Content -->
        <div>
            <!-- Today Tab-->
            <div id="tab_today" ng-show="ui.currentTab == 'today'" style="padding:10px 5px;">
                <% include ./components/tab_today %>
            </div>

            <!-- This Week Tab-->
            <div id="tab_this_week" ng-show="ui.currentTab == 'this_week'" style="padding:0 5px;">
                <% include ./components/tab_this_week %>
            </div>
        </div>

    </div>

    <script type="text/ng-template" id="personForm">
        <% include ./components/personForm %>
    </script>

</body>

</html>
